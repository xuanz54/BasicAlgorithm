# 螺旋矩阵

## 一、题目

```
定义n阶间断折叠方阵是把n2个整数折叠填写到n阶方阵中，起始数1置于方阵的左上角，然后从起始数开始递增，每一层从第一行开始。先向下再折转向左，层层折叠的排列为间断折叠方阵，请构造并输出n阶间断折叠方阵。请实现函数int[][] FoldingMatrix(int n)，其中n为方阵的阶数，返回的int[][]为构造出的n×n间断折叠方阵。
```



![image-20240906175308438](https://gitee.com/xuanz54/images_repository/raw/master/imgs/image-20240906175308438.png)



## 二、详细代码

```python
def FoldingMatrix(n):
    """
    构造一个n×n的矩阵，按指定的折叠规则从1开始递增填充。
    :param n: int, 矩阵的阶数
    :return: list, 构造出的n×n矩阵
    """
    # 创建一个n×n的矩阵，初始化为0
    a = [[0 for _ in range(n)] for _ in range(n)]
    k = 1  # 初始化起始数为1
    a[0][0] = k  # 左上角置为1
    k += 1
    # 逐步填充矩阵
    for i in range(1, n):
        x, y = 0, i  # 初始化位置，行x从0开始，列y从i开始
        a[x][y] = k  # 填充起始位置
        k += 1
        x += 1  # 移动到下一行
        # 填充对角线向下部分
        for j in range(i):
            a[x][y] = k
            k += 1
            x += 1
        x -= 1  # 回退到最后填充的行
        y -= 1  # 向左移动一列
        # 填充对角线向左部分
        for j in range(i):
            a[x][y] = k
            k += 1
            y -= 1
    return a

def print_matrix(matrix):
    """
    按指定格式打印矩阵。
    :param matrix: list, 需要打印的二维列表矩阵
    """
    for row in matrix:
        for elem in row:
            print(f"{elem:4d}", end="")
        print()  # 换行

# 示例运行
n = int(input("请输入方阵的阶数："))  # 从用户获取方阵阶数
matrix = FoldingMatrix(n)
print_matrix(matrix)
def FoldingMatrix(n):
    """
    构造一个n×n的矩阵，按指定的折叠规则从1开始递增填充。
    :param n: int, 矩阵的阶数
    :return: list, 构造出的n×n矩阵
    """
    # 创建一个n×n的矩阵，初始化为0
    a = [[0 for _ in range(n)] for _ in range(n)]
    k = 1  # 初始化起始数为1
    a[0][0] = k  # 左上角置为1
    k += 1
    # 逐步填充矩阵
    for i in range(1, n):
        x, y = 0, i  # 初始化位置，行x从0开始，列y从i开始
        a[x][y] = k  # 填充起始位置
        k += 1
        x += 1  # 移动到下一行
        # 填充对角线向下部分
        for j in range(i):
            a[x][y] = k
            k += 1
            x += 1
        x -= 1  # 回退到最后填充的行
        y -= 1  # 向左移动一列
        # 填充对角线向左部分
        for j in range(i):
            a[x][y] = k
            k += 1
            y -= 1
    return a

def print_matrix(matrix):
    """
    按指定格式打印矩阵。
    :param matrix: list, 需要打印的二维列表矩阵
    """
    for row in matrix:
        for elem in row:
            print(f"{elem:4d}", end="")
        print()  # 换行

# 示例运行
n = int(input("请输入方阵的阶数："))  # 从用户获取方阵阶数
matrix = FoldingMatrix(n)
print_matrix(matrix)
```

## 三、代码解析

### 代码逻辑：

1. **创建 n×n 的矩阵并初始化**：
   - 使用一个二维列表 `a`，将所有元素初始化为 0。
   - 初始化填入的数 `k` 为 1，并将矩阵的左上角 `a[0][0]` 置为 `k = 1`。
   - 然后每一轮都从对角线的右端开始填入数字，先向下填充，然后向左填充。

### 逐步示例（以 n=4 为例）：

#### 步骤 1：初始化矩阵

创建一个 4x4 的矩阵，并初始化为全 0：

```
0  0  0  0
0  0  0  0
0  0  0  0
0  0  0  0
```

#### 步骤 2：将第一个数放在左上角
将 `k = 1` 放入 `a[0][0]`：

```
1  0  0  0
0  0  0  0
0  0  0  0
0  0  0  0
```

#### 步骤 3：第一轮填充 (i=1)
从对角线开始填充，行 `x=0`，列 `y=1`：
- **先填对角线向下部分**：
  - 放入 `k=2` 到 `a[0][1]`：
  
    ```
    1  2  0  0
    0  0  0  0
    0  0  0  0
    0  0  0  0
    ```

  - 再将 `k=3` 放入 `a[1][1]`（向下移动一行）：

    ```
    1  2  0  0
    0  3  0  0
    0  0  0  0
    0  0  0  0
    ```

  - 回退一行，继续向左填充，将 `k=4` 放入 `a[1][0]`：

    ```
    1  2  0  0
    4  3  0  0
    0  0  0  0
    0  0  0  0
    ```

#### 步骤 4：第二轮填充 (i=2)
从对角线开始填充，行 `x=0`，列 `y=2`：
- **先填对角线向下部分**：
  - 放入 `k=5` 到 `a[0][2]`：
  
    ```
    1  2  5  0
    4  3  0  0
    0  0  0  0
    0  0  0  0
    ```

  - 再将 `k=6` 放入 `a[1][2]`：

    ```
    1  2  5  0
    4  3  6  0
    0  0  0  0
    0  0  0  0
    ```

  - 再将 `k=7` 放入 `a[2][2]`：

    ```
    1  2  5  0
    4  3  6  0
    0  0  7  0
    0  0  0  0
    ```

- **填充对角线向左部分**：
  - 回退一行，并向左移动一列，将 `k=8` 放入 `a[2][1]`：

    ```
    1  2  5  0
    4  3  6  0
    0  8  7  0
    0  0  0  0
    ```

  - 再向左移动一列，将 `k=9` 放入 `a[2][0]`：

    ```
    1  2  5  0
    4  3  6  0
    9  8  7  0
    0  0  0  0
    ```

#### 步骤 5：第三轮填充 (i=3)
从对角线开始填充，行 `x=0`，列 `y=3`：
- **先填对角线向下部分**：
  - 放入 `k=10` 到 `a[0][3]`：
  
    ```
    1  2  5 10
    4  3  6  0
    9  8  7  0
    0  0  0  0
    ```

  - 再将 `k=11` 放入 `a[1][3]`：

    ```
    1  2  5 10
    4  3  6 11
    9  8  7  0
    0  0  0  0
    ```

  - 再将 `k=12` 放入 `a[2][3]`：

    ```
    1  2  5 10
    4  3  6 11
    9  8  7 12
    0  0  0  0
    ```

  - 再将 `k=13` 放入 `a[3][3]`：

    ```
    1  2  5 10
    4  3  6 11
    9  8  7 12
    0  0  0 13
    ```

- **填充对角线向左部分**：
  - 回退一行，并向左移动一列，将 `k=14` 放入 `a[3][2]`：

    ```
    1  2  5 10
    4  3  6 11
    9  8  7 12
    0  0 14 13
    ```

  - 再将 `k=15` 放入 `a[3][1]`：

    ```
    1  2  5 10
    4  3  6 11
    9  8  7 12
    0 15 14 13
    ```

  - 最后将 `k=16` 放入 `a[3][0]`：

    ```
    1  2  5 10
    4  3  6 11
    9  8  7 12
    16 15 14 13
    ```

### 最终结果：

```
1  2  5 10
4  3  6 11
9  8  7 12
16 15 14 13
```
